(function(c){var d=function(T){var b={};var K={};var H={};var V=80;var N=80;var S=0;var Q=0;var J=0;var C=c("body");var F=0;var a=0;var Y=0;var P=c("body").css("font-family");var W=null;var X=function(e,f){for(i=e.length-1;i>=0;i--){if(f!=e.charAt(i)){e=e.substring(0,i+1);break}}return e};var U=function(){c(b.fontsizeSelector).filter(function(j){var g=this.nodeName.toLowerCase();var k=false;var h=0;var e=1;switch(g){case"h1":h=100;k=true;break;case"h2":h=80;e=0.8;k=true;break;case"h3":h=40;e=0.6;k=true;break;case"h4":h=20;e=0.4;k=true;break}if(k){var f=c(this).attr("style")||"";c(this).attr("style",f+";font-size:"+(parseInt(N)+(b.fontSizeHeadersIncrement*e)+h)+"%")}})};var D=function(f){J=parseInt(K.getItem("scr_highcontrast_alternate"))||0;var e=function(){C.removeClass("scr_highcontrast");Q=0;K.setItem("scr_highcontrast",Q);if(W===null){W=C.attr("style")||""}var j="";if(c(this).data("rotate")){j=" hue-rotate("+parseInt(c(this).data("rotate"))+"deg)"}var h="";if(c(this).data("brightness")){h=" brightness("+parseInt(c(this).data("brightness"))+")"}C.attr("style",X(W,";")+";filter: invert(100%)"+j+h)};if(!J){e.bind(this)();J=c(this).data("alternate")}else{if(J&&typeof(f)!=="undefined"){var g=c(this).data("alternate");if(g==J){C.attr("style",W);J=0}else{J=g;e.bind(this)()}}else{if(J&&typeof(f)==="undefined"){e.bind(this)()}}}K.setItem("scr_highcontrast_alternate",J)};var M=function(h,j){h=h.toUpperCase();var k=h.split("");var l="";var m="FEDCBA9876".split("");var f=new Array();f.A="5";f.B="4";f.C="3";f.D="2";f.E="1";f.F="0";for(i=0;i<6;i++){if(!isNaN(k[i])){l+=m[k[i]]}else{if(f[k[i]]){l+=f[k[i]]}else{return false}}}if(j&&b.ieHighContrast){var e=parseInt(h,16);var g=parseInt(l,16);if(g<e){return h}}return l};var L=function(j){var e=/rgba? *\( *([0-9]{1,3}) *, *([0-9]{1,3}) *, *([0-9]{1,3})(, *[0-9]{1,3}[.0-9]*)? *\)/;var k=e.exec(j);if(!k){return"FFFFFF"}var f=Math.round(parseFloat(k[1]));var g=Math.round(parseFloat(k[2]));var l=Math.round(parseFloat(k[3]));var h=(f+65536).toString(16).substring(3).toUpperCase()+(g+65536).toString(16).substring(3).toUpperCase()+(l+65536).toString(16).substring(3).toUpperCase();return h};var I=function(e){var f=" -webkit- -moz- -o- -ms- ".split(" ");var g=document.createElement("div");g.style.cssText=f.join("filter:invert(100%); ");return !!g.style.length&&((document.documentMode===undefined||document.documentMode>9))};var O=function(f){var e=c(f);c.fn.skipElement=function(g){var h=this.css(g);this.css(g,"inherit");var j=this.css(g);if(h!=j&&L(j)!="000000"){this.css(g,j);return true}else{this.css(g,h);return false}};c(f).each(function(l,j){if(c.inArray(j.nodeName.toLowerCase(),["script","embed","object"])==-1){if(b.ieHighContrastAdvanced){var n=c(j).css("background-color");var o=c(j).css("color");if(n&&o){var g=M(L(n));var h=M(L(o),true);var m=c(j).attr("style")||"";var k=m+" background-color:#"+g+" !important; color:#"+h+" !important";c(j).attr("style",k)}}else{if(!c(j).skipElement("background-color")){var n=c(j).css("background-color");var o=c(j).css("color");if(n&&o){var g=M(L(n));var h=M(L(o),true);c(j).css("background-color","#"+g);c(j).css("color","#"+h)}}}}})};var E=function(e){var f=c(b.skipToContentsSelector);if(f.length){c("html, body").animate({scrollTop:f.offset().top},500)}};this.buildInterface=function(){var r=c("<div/>").attr("id","accessibility-links").addClass(b.position+" "+b.scrolling+" "+b.templateOrientation);if(b.targetAppendMode=="bottom"){r.appendTo(b.targetAppendto)}else{if(b.targetAppendMode=="top"){r.prependTo(b.targetAppendto)}}var al=c("<div/>").attr("id","text_plugin").attr("title"," - "+(b.labeltext||fr_screenreader)+" - ").addClass("scbasebin screenreader text");if(!b.showlabel){al.addClass("scr_nolabel")}if(b.screenreaderIcon=="wheelchair"){al.addClass("scr_wheelchair")}r.append(al);if(b.screenreader){var u=c("<div/>").attr("id","volume_plugin").addClass("scbasebin");r.append(u)}var s=c("<div/>").attr("id","speaker_plugin").addClass("scbasebin speaker");r.append(s);var t=c("<div/>").css("clear","both").attr("id","scr_clearer");r.append(t);if(b.showlabel){var au=c("<span/>").addClass("fr_label startapp").text(b.labeltext||fr_screenreader);al.append(au)}if(b.screenreader){var p=c("<button/>").attr({id:"fr_screenreader_play",title:" - "+fr_screenreader_play+" - ",accesskey:b.accesskey_play}).addClass("pinnable").text(fr_screenreader_play);s.append(p);var aq=c("<button/>").attr({id:"fr_screenreader_pause",title:" - "+fr_screenreader_pause+" - ",accesskey:b.accesskey_pause}).addClass("pinnable").text(fr_screenreader_pause);s.append(aq);var f=c("<button/>").attr({id:"fr_screenreader_stop",title:" - "+fr_screenreader_stop+" - ",accesskey:b.accesskey_stop}).addClass("pinnable").text(fr_screenreader_stop);s.append(f)}if(b.fontsize){var g=c("<button/>").attr({id:"fr_screenreader_font_increase",title:" - "+fr_increase+" - ",accesskey:b.accesskey_increase,"data-value":"1"}).addClass("sizable").text(fr_increase);s.append(g);var ar=c("<button/>").attr({id:"fr_screenreader_font_decrease",title:" - "+fr_decrease+" - ",accesskey:b.accesskey_decrease,"data-value":"-1"}).addClass("sizable").text(fr_decrease);s.append(ar);var n=c("<button/>").attr({id:"fr_screenreader_font_reset",title:" - "+fr_reset+" - ",accesskey:b.accesskey_reset,"data-value":"0"}).addClass("resizable").text(fr_reset);s.append(n)}if(b.dyslexicFont){var A=c("<button/>").attr({id:"fr_screenreader_font_family",title:" - "+fr_dyslexic_title+" - ",accesskey:b.accesskey_dyslexic,"data-value":"0"}).text(fr_dyslexic_title);s.append(A)}if(b.grayHues){var ao=c("<button/>").attr({id:"fr_screenreader_gray_hues",title:" - "+fr_gray_hues+" - ",accesskey:b.accesskey_grayhues}).text(fr_gray_hues);s.append(ao)}if(b.bigCursor){var aw=c("<button/>").attr({id:"fr_screenreader_bigcursor",title:" - "+fr_big_cursor+" - ",accesskey:b.accesskey_bigcursor}).text(fr_big_cursor);s.append(aw)}if(b.showSkipToContents){var x=c("<button/>").attr({id:"fr_screenreader_skiptocontents",title:" - "+fr_showskiptocontents_title+" - ",accesskey:b.accesskey_skiptocontents}).text(fr_showskiptocontents_title);s.append(x)}if(b.spacingSize){var ax=c("<button/>").attr({id:"fr_screenreader_spacing_increase",title:" - "+fr_spacing_increase+" - ",accesskey:b.accesskey_spacingsize_increase,"data-value":"1"}).addClass("spacingsizable").text(fr_spacing_increase);s.append(ax);var y=c("<button/>").attr({id:"fr_screenreader_spacing_decrease",title:" - "+fr_spacing_decrease+" - ",accesskey:b.accesskey_spacingsize_decrease,"data-value":"-1"}).addClass("spacingsizable").text(fr_spacing_decrease);s.append(y)}var e=0;if(!b.screenreader){e=100}if(!b.dyslexicFont){e+=35}if(!b.grayHues){e+=35}if(!b.bigCursor){e+=35}if(!b.showSkipToContents){e+=35}if(!b.spacingSize){e+=70}if(b.highcontrast){var q=c("<button/>").attr({id:"fr_screenreader_highcontrast",title:" - "+fr_highcontrast+" - ",accesskey:b.accesskey_highcontrast,"data-value":"0"}).text(fr_highcontrast);s.append(q);var B=b.highcontrastAlternate&&I();if(B){var h=c("<button/>").attr({id:"fr_screenreader_highcontrast2",title:" - "+fr_highcontrast+" - ",accesskey:b.accesskey_highcontrast2,"data-alternate":"1","data-rotate":b.colorHue}).text(fr_highcontrast);s.append(h);var j=c("<button/>").attr({id:"fr_screenreader_highcontrast3",title:" - "+fr_highcontrast+" - ",accesskey:b.accesskey_highcontrast3,"data-alternate":"2","data-rotate":b.colorHue,"data-brightness":b.colorBrightness}).text(fr_highcontrast);s.append(j);J=parseInt(K.getItem("scr_highcontrast_alternate"))||0;if(J){var w=c("button[data-alternate="+J+"]");D.call(w)}}if(b.fontsize&&B){c("#speaker_plugin").css("width",parseInt(520-e)+"px")}else{if(b.fontsize){c("#speaker_plugin").css("width",parseInt(455-e)+"px")}else{if(!b.fontsize&&B){c("#speaker_plugin").css("width",parseInt(425-e)+"px")}}}}else{if(b.fontsize){c("#speaker_plugin").css("width",parseInt(425-e)+"px")}else{c("#speaker_plugin").css("width",parseInt(315-e)+"px")}}if(b.template=="custom.css"){c("#speaker_plugin button").css("background-color",b.toolbarBgcolor);c("#accessibility-links").css("background","transparent")}else{c("#accessibility-links").css("background-color",b.toolbarBgcolor)}if(b.templateOrientation=="vertical"&&b.template!="custom.css"){c("#text_plugin").css("background-color",b.toolbarBgcolor)}if(screenReaderConfigOptions.useMinimizedToolbar){var z=c("#volume_plugin").width();var an=c("#speaker_plugin").width();var l=parseInt(z+an);if(b.templateOrientation=="vertical"){l=parseInt(an)}var at=0;var k="+";var ap=c(window).width();if(ap<l){l=ap-80}c("#text_plugin").attr("accesskey",screenReaderConfigOptions.accesskey_minimized);if(b.fontsizeMinimizedToolbar&&screenReaderConfigOptions.statusMinimizedToolbar=="closed"){c("#text_plugin").on("click",function(Z){c("body").css("font-size",N+"%");if(b.fontsizeSelector){fontSizeInline=";font-size:100%";U()}var aa=c(b.fontsizeSelector);c.each(aa,function(ad,ac){if(c.inArray(ac.nodeName.toLowerCase(),["h1","h2","h3","h4"])!=-1){fontSizeInline=""}else{fontSizeInline=";font-size:100%"}var ab=c(ac).attr("style")||"";c(ac).attr("style",X(ab,";")+fontSizeInline)})})}switch(b.position){case"bottomright":case"topright":c("#text_plugin span.fr_label").css({cursor:"pointer"});if(screenReaderConfigOptions.statusMinimizedToolbar=="closed"){c("#accessibility-links").css({right:"-"+(l+2)+"px"})}else{c("#speaker_plugin, #volume_plugin").css({opacity:1});at=l+2;k="-"}c("#text_plugin").css({cursor:"pointer"}).on("click",function(Z){if(at){c("#speaker_plugin, #volume_plugin").animate({opacity:0},300)}c("#accessibility-links").animate({right:(k+at)},500,function(){at=at?0:l+2;k="+"?"-":"+"});if(!at){setTimeout(function(){c("#speaker_plugin, #volume_plugin").animate({opacity:1},300)},300)}});break;case"topleft":case"bottomleft":if(screenReaderConfigOptions.statusMinimizedToolbar=="closed"){c("#volume_plugin,#speaker_plugin").hide()}c("#text_plugin span.fr_label").css({cursor:"pointer"});c("#text_plugin").css({cursor:"pointer"}).on("click",function(Z){c("#volume_plugin,#speaker_plugin").fadeToggle()});break}}else{switch(b.position){case"bottomright":case"topright":c("#speaker_plugin, #volume_plugin").css({opacity:1});break}}if(b.templateOrientation=="vertical"){var o=c("#text_plugin");var av=c("#volume_plugin");var am=o.clone(true,true);var m=av.clone(true,true);var v=c("#scr_clearer").before(am).before(m);o.remove();av.remove()}};this.startTTSEngine=function(){H=new jQuery.frTTSEngine(b);return true};var G=function(){c(document).on("click",".sizable",function(e){var f=parseInt(c(this).data("value"));N=parseInt(N)+parseInt(f*5);if(N>b.fontsizeMax){N=b.fontsizeMax}else{if(N<b.fontsizeMin){N=b.fontsizeMin}}c("body").css("font-size",N+"%");if(b.fontsizeSelector){U()}K.setItem("scr_fontsize",N)});c(document).on("click",".resizable",function(j){if(b.resetButtonBehavior=="all"){var m=!!parseInt(K.getItem("scr_highcontrast"))||0;if(m){c("#fr_screenreader_highcontrast").trigger("click")}else{var e=parseInt(K.getItem("scr_highcontrast_alternate"))||0;if(e==1){c("#fr_screenreader_highcontrast2").trigger("click")}if(e==2){c("#fr_screenreader_highcontrast3").trigger("click")}}var k=!!parseInt(K.getItem("scr_dyslexicfont"))||0;if(k){c("#fr_screenreader_font_family").trigger("click")}var g=!!parseInt(K.getItem("scr_grayhues"))||0;if(g){c("#fr_screenreader_gray_hues").trigger("click")}var f=!!parseInt(K.getItem("scr_bigcursor"))||0;if(f){c("#fr_screenreader_bigcursor").trigger("click")}}N=V;c("body").css("font-size",V+"%");var h=!!parseInt(K.getItem("scr_spacingsize"))||0;var l="";if(h){c("body").css({"word-spacing":"inherit","letter-spacing":"inherit"});l=";word-spacing:inherit;letter-spacing:inherit";K.setItem("scr_spacingsize",0);S=0}if(b.fontsizeSelector){U()}K.setItem("scr_fontsize",V)});c(document).on("click",".spacingsizable",function(e){var f=parseInt(c(this).data("value"));S=parseInt(S)+parseInt(f);c("body").css({"word-spacing":(S*2)+"px","letter-spacing":S+"px"});K.setItem("scr_spacingsize",S)});c(document).on("click","#fr_screenreader_highcontrast",function(e){Q=!!parseInt(K.getItem("scr_highcontrast"))||0;if(!Q){if(J){C.attr("style",W);J=0;K.setItem("scr_highcontrast_alternate",J)}C.addClass("scr_highcontrast");if("ActiveXObject" in window){O("body, body *:not(#accessibility-links, #accessibility-links *, div.shapes)")}Q=1}else{C.removeClass("scr_highcontrast");if("ActiveXObject" in window){Q=0;window.location.reload()}Q=0}K.setItem("scr_highcontrast",Q)});c(document).on("click","#fr_screenreader_font_family",function(e){F=!!parseInt(K.getItem("scr_dyslexicfont"))||0;if(!F){c("body").addClass("scr_dyslexic");if(b.fontsizeSelector){var f=c(b.fontsizeSelector);c.each(f,function(j,h){var g=c(h).attr("style")||"";c(h).attr("style",g+";font-family:OpenDyslexic")})}F=1}else{c("body").removeClass("scr_dyslexic");if(b.fontsizeSelector){var f=c(b.fontsizeSelector);c.each(f,function(j,h){var g=c(h).attr("style")||"";c(h).attr("style",g.replace(";font-family:OpenDyslexic",""))})}F=0}K.setItem("scr_dyslexicfont",F)});c(document).on("click","#fr_screenreader_gray_hues",function(e){a=!!parseInt(K.getItem("scr_grayhues"))||0;if(!a){C.addClass("scr_grayhues");a=1}else{C.removeClass("scr_grayhues");a=0}K.setItem("scr_grayhues",a)});c(document).on("click","#fr_screenreader_bigcursor",function(e){Y=!!parseInt(K.getItem("scr_bigcursor"))||0;if(!Y){c("body").addClass("scr_bigcursor");Y=1}else{c("body").removeClass("scr_bigcursor");Y=0}K.setItem("scr_bigcursor",Y)});c(document).on("click","#fr_screenreader_highcontrast2, #fr_screenreader_highcontrast3",D);if(b.showSkipToContents){c(document).on("click","#fr_screenreader_skiptocontents",E)}};(function R(){c.extend(b,T);if(b.selectedStorage=="session"){K=window.sessionStorage}else{if(b.selectedStorage=="local"){K=window.localStorage}}if(b.rootTarget&&!navigator.mozGetUserMedia){C=c("html")}if(jQuery.frTTSEngine===undefined){jQuery('script[src*="tts.js"]').clone().appendTo("body")}if(b.autoBackgroundColor){var e=c("body").css("background-color");c("html").css("background-color",e)}V=N=b.fontsizeDefault;var g=K.getItem("scr_fontsize");if(g){N=g}var h="";if(b.spacingSize){S=parseInt(K.getItem("scr_spacingsize"))||0;if(S>0){c("body").css({"word-spacing":(S*2)+"px","letter-spacing":S+"px"})}if(b.fontsizeSelector){h=";word-spacing:inherit;letter-spacing:inherit"}}var f="";var j=!!screenReaderConfigOptions.useMinimizedToolbar&&!!b.fontsizeMinimizedToolbar&&screenReaderConfigOptions.statusMinimizedToolbar=="closed";if(b.fontsize&&!j){c("body").css("font-size",N+"%");if(b.fontsizeSelector){f=";font-size:100%";U()}}if(b.fontsize||b.spacingSize){var k=c(b.fontsizeSelector);c.each(k,function(n,m){if(c.inArray(m.nodeName.toLowerCase(),["h1","h2","h3","h4"])!=-1||j){f=""}else{f=";font-size:100%"}var l=c(m).attr("style")||"";c(m).attr("style",X(l,";")+f+h)})}Q=!!parseInt(K.getItem("scr_highcontrast"))||0;if(Q){C.addClass("scr_highcontrast");if("ActiveXObject" in window){O("body, body *:not(#accessibility-links, #accessibility-links *, div.shapes)")}}F=!!parseInt(K.getItem("scr_dyslexicfont"))||0;if(F){c("body").addClass("scr_dyslexic");if(b.fontsizeSelector){var k=c(b.fontsizeSelector);c.each(k,function(n,m){var l=c(m).attr("style")||"";c(m).attr("style",l+";font-family:OpenDyslexic")})}}a=!!parseInt(K.getItem("scr_grayhues"))||0;if(a){C.addClass("scr_grayhues")}Y=!!parseInt(K.getItem("scr_bigcursor"))||0;if(Y){c("body").addClass("scr_bigcursor")}if(b.removeLinksTarget){c("a").removeAttr("target")}G()}).call(this)};c(function(){function a(){var h=!!("ontouchstart" in window);var k=!!(navigator.msMaxTouchPoints);var j=h||k;return j}var b=a();if(screenReaderConfigOptions.hideOnMobile&&b){return}if(b&&screenReaderConfigOptions.useMobileReaderEngine){if(screenReaderConfigOptions.readerEngine!=screenReaderConfigOptions.mobileReaderEngine){screenReaderConfigOptions.readerEngine=screenReaderConfigOptions.mobileReaderEngine}if(screenReaderConfigOptions.readerEngine=="proxy"&&parseInt(screenReaderConfigOptions.chunkLength)>100){screenReaderConfigOptions.chunkLength=90}if(screenReaderConfigOptions.readerEngine=="proxy_virtual"&&parseInt(screenReaderConfigOptions.chunkLength)>=300){screenReaderConfigOptions.chunkLength=280}}window.ScreenReaderMainController=new d(screenReaderConfigOptions);ScreenReaderMainController.buildInterface();ScreenReaderMainController.startTTSEngine()})})(jQuery);